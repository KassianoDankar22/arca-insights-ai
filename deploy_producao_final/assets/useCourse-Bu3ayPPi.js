import{r as o}from"./react-vendor-DZvRB87w.js";import{s as u}from"./index-Df_bSpit.js";const x=l=>{const[a,f]=o.useState(null),[d,i]=o.useState([]),[w,t]=o.useState(!0),[m,c]=o.useState(null),h=async()=>{try{t(!0);const{data:s,error:r}=await u.from("courses").select("*").order("created_at",{ascending:!1});if(r)throw r;i(s||[])}catch(s){c("Erro ao carregar cursos"),console.error(s)}finally{t(!1)}},g=async s=>{try{t(!0);const{data:r,error:e}=await u.from("courses").select("*").eq("id",s).single();if(e)throw e;f(r)}catch(r){c("Erro ao carregar curso"),console.error(r)}finally{t(!1)}},p=async s=>{try{t(!0);const{data:r,error:e}=await u.from("courses").insert([s]).select().single();if(e)throw e;return i(n=>[r,...n]),r}catch(r){throw c("Erro ao criar curso"),console.error(r),r}finally{t(!1)}},C=async(s,r)=>{try{t(!0);const{data:e,error:n}=await u.from("courses").update(r).eq("id",s).select().single();if(n)throw n;return i(E=>E.map(y=>y.id===s?e:y)),(a==null?void 0:a.id)===s&&f(e),e}catch(e){throw c("Erro ao atualizar curso"),console.error(e),e}finally{t(!1)}};return o.useEffect(()=>{l?g(l):h()},[l]),{course:a,courses:d,loading:w,error:m,createCourse:p,updateCourse:C,refetchCourses:h}};export{x as u};
