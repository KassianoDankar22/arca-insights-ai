import{j as n}from"./supabase-vendor-vwXl956e.js";import{R as X,r as j}from"./react-vendor-DZvRB87w.js";import{j as R,s as p,e as _,v as F}from"./index-Bcg3-yyF.js";import{m as T}from"./proxy-CqlErGxY.js";import{S as H}from"./send-DB2PUUVK.js";import{C as V}from"./chevron-down-C_P1G3tD.js";import{u as Y}from"./use-auth-M1w9gi-m.js";import{D as I,a as L,b as B,c as Q}from"./dropdown-menu-Bwx_JN1Y.js";import{P as q}from"./plus-D1K4CKnh.js";import{E as J}from"./ellipsis-vertical-BsDF478x.js";import{A as U}from"./archive-CtzyQtZr.js";import"./ui-vendor-Dea2Gxwc.js";import"./chevron-right-2u11bsEk.js";import"./check-DqYQ0lV2.js";import"./circle-YrizIO9s.js";const G=({title:e,onClick:a})=>n.jsx("button",{onClick:a,className:"flex items-center w-full p-3 text-left transition-all border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-gray-300 hover:shadow-sm",children:n.jsx("span",{className:"text-sm text-gray-700",children:e})}),O=X.memo(({className:e})=>{const a=["M-380 -189C-380 -189 -312 216 152 343C616 470 684 875 684 875","M-373 -197C-373 -197 -305 208 159 335C623 462 691 867 691 867","M-366 -205C-366 -205 -298 200 166 327C630 454 698 859 698 859","M-359 -213C-359 -213 -291 192 173 319C637 446 705 851 705 851","M-352 -221C-352 -221 -284 184 180 311C644 438 712 843 712 843","M-345 -229C-345 -229 -277 176 187 303C651 430 719 835 719 835","M-338 -237C-338 -237 -270 168 194 295C658 422 726 827 726 827","M-331 -245C-331 -245 -263 160 201 287C665 414 733 819 733 819","M-324 -253C-324 -253 -256 152 208 279C672 406 740 811 740 811","M-317 -261C-317 -261 -249 144 215 271C679 398 747 803 747 803","M-310 -269C-310 -269 -242 136 222 263C686 390 754 795 754 795","M-303 -277C-303 -277 -235 128 229 255C693 382 761 787 761 787","M-296 -285C-296 -285 -228 120 236 247C700 374 768 779 768 779","M-289 -293C-289 -293 -221 112 243 239C707 366 775 771 775 771","M-282 -301C-282 -301 -214 104 250 231C714 358 782 763 782 763","M-275 -309C-275 -309 -207 96 257 223C721 350 789 755 789 755","M-268 -317C-268 -317 -200 88 264 215C728 342 796 747 796 747","M-261 -325C-261 -325 -193 80 271 207C735 334 803 739 803 739","M-254 -333C-254 -333 -186 72 278 199C742 326 810 731 810 731","M-247 -341C-247 -341 -179 64 285 191C749 318 817 723 817 723","M-240 -349C-240 -349 -172 56 292 183C756 310 824 715 824 715","M-233 -357C-233 -357 -165 48 299 175C763 302 831 707 831 707","M-226 -365C-226 -365 -158 40 306 167C770 294 838 699 838 699","M-219 -373C-219 -373 -151 32 313 159C777 286 845 691 845 691","M-212 -381C-212 -381 -144 24 320 151C784 278 852 683 852 683","M-205 -389C-205 -389 -137 16 327 143C791 270 859 675 859 675","M-198 -397C-198 -397 -130 8 334 135C798 262 866 667 866 667","M-191 -405C-191 -405 -123 0 341 127C805 254 873 659 873 659","M-184 -413C-184 -413 -116 -8 348 119C812 246 880 651 880 651","M-177 -421C-177 -421 -109 -16 355 111C819 238 887 643 887 643","M-170 -429C-170 -429 -102 -24 362 103C826 230 894 635 894 635","M-163 -437C-163 -437 -95 -32 369 95C833 222 901 627 901 627","M-156 -445C-156 -445 -88 -40 376 87C840 214 908 619 908 619","M-149 -453C-149 -453 -81 -48 383 79C847 206 915 611 915 611","M-142 -461C-142 -461 -74 -56 390 71C854 198 922 603 922 603","M-135 -469C-135 -469 -67 -64 397 63C861 190 929 595 929 595","M-128 -477C-128 -477 -60 -72 404 55C868 182 936 587 936 587","M-121 -485C-121 -485 -53 -80 411 47C875 174 943 579 943 579","M-114 -493C-114 -493 -46 -88 418 39C882 166 950 571 950 571","M-107 -501C-107 -501 -39 -96 425 31C889 158 957 563 957 563","M-100 -509C-100 -509 -32 -104 432 23C896 150 964 555 964 555","M-93 -517C-93 -517 -25 -112 439 15C903 142 971 547 971 547","M-86 -525C-86 -525 -18 -120 446 7C910 134 978 539 978 539","M-79 -533C-79 -533 -11 -128 453 -1C917 126 985 531 985 531","M-72 -541C-72 -541 -4 -136 460 -9C924 118 992 523 992 523","M-65 -549C-65 -549 3 -144 467 -17C931 110 999 515 999 515","M-58 -557C-58 -557 10 -152 474 -25C938 102 1006 507 1006 507","M-51 -565C-51 -565 17 -160 481 -33C945 94 1013 499 1013 499","M-44 -573C-44 -573 24 -168 488 -41C952 86 1020 491 1020 491","M-37 -581C-37 -581 31 -176 495 -49C959 78 1027 483 1027 483"];return n.jsx("div",{className:R("absolute h-full w-full inset-0 [mask-size:40px] [mask-repeat:no-repeat] flex items-center justify-center",e),children:n.jsxs("svg",{className:"z-0 h-full w-full pointer-events-none absolute",width:"100%",height:"100%",viewBox:"0 0 696 316",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("path",{d:"M-380 -189C-380 -189 -312 216 152 343C616 470 684 875 684 875M-373 -197C-373 -197 -305 208 159 335C623 462 691 867 691 867M-366 -205C-366 -205 -298 200 166 327C630 454 698 859 698 859M-359 -213C-359 -213 -291 192 173 319C637 446 705 851 705 851M-352 -221C-352 -221 -284 184 180 311C644 438 712 843 712 843M-345 -229C-345 -229 -277 176 187 303C651 430 719 835 719 835M-338 -237C-338 -237 -270 168 194 295C658 422 726 827 726 827M-331 -245C-331 -245 -263 160 201 287C665 414 733 819 733 819M-324 -253C-324 -253 -256 152 208 279C672 406 740 811 740 811M-317 -261C-317 -261 -249 144 215 271C679 398 747 803 747 803M-310 -269C-310 -269 -242 136 222 263C686 390 754 795 754 795M-303 -277C-303 -277 -235 128 229 255C693 382 761 787 761 787M-296 -285C-296 -285 -228 120 236 247C700 374 768 779 768 779M-289 -293C-289 -293 -221 112 243 239C707 366 775 771 775 771M-282 -301C-282 -301 -214 104 250 231C714 358 782 763 782 763M-275 -309C-275 -309 -207 96 257 223C721 350 789 755 789 755M-268 -317C-268 -317 -200 88 264 215C728 342 796 747 796 747M-261 -325C-261 -325 -193 80 271 207C735 334 803 739 803 739M-254 -333C-254 -333 -186 72 278 199C742 326 810 731 810 731M-247 -341C-247 -341 -179 64 285 191C749 318 817 723 817 723M-240 -349C-240 -349 -172 56 292 183C756 310 824 715 824 715M-233 -357C-233 -357 -165 48 299 175C763 302 831 707 831 707M-226 -365C-226 -365 -158 40 306 167C770 294 838 699 838 699M-219 -373C-219 -373 -151 32 313 159C777 286 845 691 845 691M-212 -381C-212 -381 -144 24 320 151C784 278 852 683 852 683M-205 -389C-205 -389 -137 16 327 143C791 270 859 675 859 675M-198 -397C-198 -397 -130 8 334 135C798 262 866 667 866 667M-191 -405C-191 -405 -123 0 341 127C805 254 873 659 873 659M-184 -413C-184 -413 -116 -8 348 119C812 246 880 651 880 651M-177 -421C-177 -421 -109 -16 355 111C819 238 887 643 887 643M-170 -429C-170 -429 -102 -24 362 103C826 230 894 635 894 635M-163 -437C-163 -437 -95 -32 369 95C833 222 901 627 901 627M-156 -445C-156 -445 -88 -40 376 87C840 214 908 619 908 619M-149 -453C-149 -453 -81 -48 383 79C847 206 915 611 915 611M-142 -461C-142 -461 -74 -56 390 71C854 198 922 603 922 603M-135 -469C-135 -469 -67 -64 397 63C861 190 929 595 929 595M-128 -477C-128 -477 -60 -72 404 55C868 182 936 587 936 587M-121 -485C-121 -485 -53 -80 411 47C875 174 943 579 943 579M-114 -493C-114 -493 -46 -88 418 39C882 166 950 571 950 571M-107 -501C-107 -501 -39 -96 425 31C889 158 957 563 957 563M-100 -509C-100 -509 -32 -104 432 23C896 150 964 555 964 555M-93 -517C-93 -517 -25 -112 439 15C903 142 971 547 971 547M-86 -525C-86 -525 -18 -120 446 7C910 134 978 539 978 539M-79 -533C-79 -533 -11 -128 453 -1C917 126 985 531 985 531M-72 -541C-72 -541 -4 -136 460 -9C924 118 992 523 992 523M-65 -549C-65 -549 3 -144 467 -17C931 110 999 515 999 515M-58 -557C-58 -557 10 -152 474 -25C938 102 1006 507 1006 507M-51 -565C-51 -565 17 -160 481 -33C945 94 1013 499 1013 499M-44 -573C-44 -573 24 -168 488 -41C952 86 1020 491 1020 491M-37 -581C-37 -581 31 -176 495 -49C959 78 1027 483 1027 483",stroke:"url(#paint0_radial_242_278)",strokeOpacity:"0.05",strokeWidth:"0.5"}),a.map((t,s)=>n.jsx(T.path,{d:t,stroke:`url(#linearGradient-${s})`,strokeOpacity:"0.4",strokeWidth:"0.5"},"path-"+s)),n.jsxs("defs",{children:[a.map((t,s)=>n.jsxs(T.linearGradient,{id:`linearGradient-${s}`,initial:{x1:"0%",x2:"0%",y1:"0%",y2:"0%"},animate:{x1:["0%","100%"],x2:["0%","95%"],y1:["0%","100%"],y2:["0%",`${93+Math.random()*8}%`]},transition:{duration:Math.random()*10+10,ease:"easeInOut",repeat:1/0,delay:Math.random()*10},children:[n.jsx("stop",{stopColor:"#18CCFC",stopOpacity:"0"}),n.jsx("stop",{stopColor:"#18CCFC"}),n.jsx("stop",{offset:"32.5%",stopColor:"#6344F5"}),n.jsx("stop",{offset:"100%",stopColor:"#AE48FF",stopOpacity:"0"})]},`gradient-${s}`)),n.jsxs("radialGradient",{id:"paint0_radial_242_278",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(352 34) rotate(90) scale(555 1560.62)",children:[n.jsx("stop",{offset:"0.0666667",stopColor:"var(--neutral-300)"}),n.jsx("stop",{offset:"0.243243",stopColor:"var(--neutral-300)"}),n.jsx("stop",{offset:"0.43594",stopColor:"white",stopOpacity:"0"})]})]})]})})});O.displayName="BackgroundBeams";const K=()=>{const[e,a]=j.useState(""),t=()=>{e.trim()&&(console.log("Sending message:",e),a(""))},s=[{title:"Calcular ROI de casa em Orlando",onClick:()=>console.log("ROI Orlando clicked")},{title:"Comparar valorizaÃ§Ã£o entre bairros",onClick:()=>console.log("ValorizaÃ§Ã£o clicked")},{title:"Mostrar tendÃªncias do mercado em Miami",onClick:()=>console.log("TendÃªncias Miami clicked")},{title:"Analisar melhor momento para investir",onClick:()=>console.log("Momento investir clicked")}];return n.jsxs("div",{className:"relative flex flex-col items-center justify-center w-full min-h-screen bg-white",children:[n.jsx(O,{className:"opacity-20"}),n.jsxs("div",{className:"z-10 flex flex-col items-center max-w-2xl px-4 py-10",children:[n.jsx("h1",{className:"mb-3 text-4xl font-bold text-center",children:"Start talking to ðŸ¤– Arca AI Chat"}),n.jsx("p",{className:"max-w-lg mb-8 text-center text-gray-600",children:"Sua assistente imobiliÃ¡ria inteligente! Precisa de uma anÃ¡lise rÃ¡pida, sugestÃµes ou um panorama do mercado? A Arca estÃ¡ aqui para ajudar."}),n.jsxs("div",{className:"w-full mb-4",children:[n.jsxs("div",{className:"relative w-full",children:[n.jsx("textarea",{value:e,onChange:r=>a(r.target.value),placeholder:"Escreva uma pergunta...",className:"w-full p-4 pr-12 text-gray-700 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-arca-blue focus:border-transparent resize-none min-h-[120px]",onKeyDown:r=>{r.key==="Enter"&&!r.shiftKey&&(r.preventDefault(),t())}}),n.jsx("button",{onClick:t,disabled:!e.trim(),className:"absolute p-2 text-white rounded-full bottom-3 right-3 bg-arca-blue hover:bg-arca-blue/80 disabled:bg-gray-300 disabled:cursor-not-allowed",children:n.jsx(H,{size:18})})]}),n.jsx("div",{className:"flex items-center justify-between w-full px-1 mt-2 text-sm text-gray-500",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"Modelo: GPT-4"}),n.jsx(V,{size:16})]})})]}),n.jsxs("div",{className:"w-full mt-4",children:[n.jsx("h3",{className:"mb-3 text-sm font-medium text-gray-500",children:"SugestÃµes"}),n.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:s.map((r,c)=>n.jsx(G,{title:r.title,onClick:r.onClick},c))})]})]})]})},Z=()=>{const{user:e}=Y(),[a,t]=j.useState([]),[s,r]=j.useState(null),[c,i]=j.useState([]),[o,y]=j.useState(!0),[d,h]=j.useState(null);j.useEffect(()=>{e?x():(t([]),r(null),i([]),y(!1))},[e]);const x=async()=>{if(e)try{y(!0);const{data:l,error:m}=await p.from("chat_conversations").select(`
          *,
          chat_messages(count)
        `).eq("user_id",e.id).eq("is_archived",!1).order("updated_at",{ascending:!1});if(m)throw m;const u=await Promise.all((l||[]).map(async f=>{const{data:M}=await p.from("chat_messages").select("content, created_at").eq("conversation_id",f.id).order("created_at",{ascending:!1}).limit(1).single(),{count:D}=await p.from("chat_messages").select("id",{count:"exact"}).eq("conversation_id",f.id);return{...f,message_count:D||0,last_message:(M==null?void 0:M.content)||""}}));t(u),h(null)}catch(l){console.error("Erro ao carregar conversas:",l),h("Erro ao carregar histÃ³rico de conversas")}finally{y(!1)}},g=async l=>{if(e)try{const{data:m,error:u}=await p.from("chat_messages").select("*").eq("conversation_id",l).order("created_at",{ascending:!0});if(u)throw u;i(m||[]),h(null)}catch(m){console.error("Erro ao carregar mensagens:",m),h("Erro ao carregar mensagens")}};return{conversations:a,currentConversation:s,messages:c,loading:o,error:d,createConversation:async(l,m)=>{if(!e)return null;try{const{data:u,error:f}=await p.from("chat_conversations").insert([{user_id:e.id,title:l,thread_id:m}]).select().single();if(f)throw f;const M={...u,message_count:0,last_message:""};return t(D=>[M,...D]),r(M),i([]),M}catch(u){return console.error("Erro ao criar conversa:",u),h("Erro ao criar nova conversa"),null}},addMessage:async(l,m,u,f)=>{if(!e)return null;try{const{data:M,error:D}=await p.from("chat_messages").insert([{conversation_id:l,role:m,content:u,metadata:f}]).select().single();if(D)throw D;return i(E=>[...E,M]),await p.from("chat_conversations").update({updated_at:new Date().toISOString()}).eq("id",l),await x(),M}catch(M){return console.error("Erro ao adicionar mensagem:",M),h("Erro ao salvar mensagem"),null}},updateConversationTitle:async(l,m)=>{if(e)try{const{error:u}=await p.from("chat_conversations").update({title:m}).eq("id",l);if(u)throw u;t(f=>f.map(M=>M.id===l?{...M,title:m}:M)),(s==null?void 0:s.id)===l&&r(f=>f?{...f,title:m}:null)}catch(u){console.error("Erro ao atualizar tÃ­tulo:",u),h("Erro ao atualizar tÃ­tulo da conversa")}},archiveConversation:async l=>{if(e)try{const{error:m}=await p.from("chat_conversations").update({is_archived:!0}).eq("id",l);if(m)throw m;t(u=>u.filter(f=>f.id!==l)),(s==null?void 0:s.id)===l&&(r(null),i([]))}catch(m){console.error("Erro ao arquivar conversa:",m),h("Erro ao arquivar conversa")}},selectConversation:async l=>{r(l),await g(l.id)},generateTitle:l=>{let u=l.split(" ").slice(0,6).join(" ");if(l.length>50&&(u+="..."),u.length<10){const f=["Nova anÃ¡lise de ROI","Consulta sobre investimento","AnÃ¡lise de propriedade","CÃ¡lculo financeiro","AvaliaÃ§Ã£o imobiliÃ¡ria"];u=f[Math.floor(Math.random()*f.length)]}return u},refresh:x}};function C(e){const a=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&a==="[object Date]"?new e.constructor(+e):typeof e=="number"||a==="[object Number]"||typeof e=="string"||a==="[object String]"?new Date(e):new Date(NaN)}function ee(e,a){return e instanceof Date?new e.constructor(a):new Date(a)}const S=43200,A=1440;let te={};function ae(){return te}function z(e){const a=C(e),t=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return t.setUTCFullYear(a.getFullYear()),+e-+t}function W(e,a){const t=C(e),s=C(a),r=t.getTime()-s.getTime();return r<0?-1:r>0?1:r}function ne(e){return ee(e,Date.now())}function re(e,a){const t=C(e),s=C(a),r=t.getFullYear()-s.getFullYear(),c=t.getMonth()-s.getMonth();return r*12+c}function se(e){return a=>{const s=(e?Math[e]:Math.trunc)(a);return s===0?0:s}}function oe(e,a){return+C(e)-+C(a)}function ie(e){const a=C(e);return a.setHours(23,59,59,999),a}function de(e){const a=C(e),t=a.getMonth();return a.setFullYear(a.getFullYear(),t+1,0),a.setHours(23,59,59,999),a}function ce(e){const a=C(e);return+ie(a)==+de(a)}function le(e,a){const t=C(e),s=C(a),r=W(t,s),c=Math.abs(re(t,s));let i;if(c<1)i=0;else{t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-r*c);let o=W(t,s)===-r;ce(C(e))&&c===1&&W(e,s)===1&&(o=!1),i=r*(c-Number(o))}return i===0?0:i}function ue(e,a,t){const s=oe(e,a)/1e3;return se(t==null?void 0:t.roundingMethod)(s)}const me={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},he=(e,a,t)=>{let s;const r=me[e];return typeof r=="string"?s=r:a===1?s=r.one:s=r.other.replace("{{count}}",a.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function N(e){return(a={})=>{const t=a.width?String(a.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}const fe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ce={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ge={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Me={date:N({formats:fe,defaultWidth:"full"}),time:N({formats:Ce,defaultWidth:"full"}),dateTime:N({formats:ge,defaultWidth:"full"})},ye={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},be=(e,a,t,s)=>ye[e];function b(e){return(a,t)=>{const s=t!=null&&t.context?String(t.context):"standalone";let r;if(s==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,o=t!=null&&t.width?String(t.width):i;r=e.formattingValues[o]||e.formattingValues[i]}else{const i=e.defaultWidth,o=t!=null&&t.width?String(t.width):e.defaultWidth;r=e.values[o]||e.values[i]}const c=e.argumentCallback?e.argumentCallback(a):a;return r[c]}}const we={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},xe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ve={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},pe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},je={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Pe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},De=(e,a)=>{const t=Number(e),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Ne={ordinalNumber:De,era:b({values:we,defaultWidth:"wide"}),quarter:b({values:xe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:b({values:ve,defaultWidth:"wide"}),day:b({values:pe,defaultWidth:"wide"}),dayPeriod:b({values:je,defaultWidth:"wide",formattingValues:Pe,defaultFormattingWidth:"wide"})};function w(e){return(a,t={})=>{const s=t.width,r=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],c=a.match(r);if(!c)return null;const i=c[0],o=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],y=Array.isArray(o)?Se(o,x=>x.test(i)):ke(o,x=>x.test(i));let d;d=e.valueCallback?e.valueCallback(y):y,d=t.valueCallback?t.valueCallback(d):d;const h=a.slice(i.length);return{value:d,rest:h}}}function ke(e,a){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&a(e[t]))return t}function Se(e,a){for(let t=0;t<e.length;t++)if(a(e[t]))return t}function $(e){return(a,t={})=>{const s=a.match(e.matchPattern);if(!s)return null;const r=s[0],c=a.match(e.parsePattern);if(!c)return null;let i=e.valueCallback?e.valueCallback(c[0]):c[0];i=t.valueCallback?t.valueCallback(i):i;const o=a.slice(r.length);return{value:i,rest:o}}}const We=/^(\d+)(th|st|nd|rd)?/i,_e=/\d+/i,Te={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},qe={any:[/^b/i,/^(a|c)/i]},Ae={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ze={any:[/1/i,/2/i,/3/i,/4/i]},Fe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Oe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ee={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Xe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Re={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},He={ordinalNumber:$({matchPattern:We,parsePattern:_e,valueCallback:e=>parseInt(e,10)}),era:w({matchPatterns:Te,defaultMatchWidth:"wide",parsePatterns:qe,defaultParseWidth:"any"}),quarter:w({matchPatterns:Ae,defaultMatchWidth:"wide",parsePatterns:ze,defaultParseWidth:"any",valueCallback:e=>e+1}),month:w({matchPatterns:Fe,defaultMatchWidth:"wide",parsePatterns:Oe,defaultParseWidth:"any"}),day:w({matchPatterns:$e,defaultMatchWidth:"wide",parsePatterns:Ee,defaultParseWidth:"any"}),dayPeriod:w({matchPatterns:Xe,defaultMatchWidth:"any",parsePatterns:Re,defaultParseWidth:"any"})},Ve={code:"en-US",formatDistance:he,formatLong:Me,formatRelative:be,localize:Ne,match:He,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ye(e,a,t){const s=ae(),r=(t==null?void 0:t.locale)??s.locale??Ve,c=2520,i=W(e,a);if(isNaN(i))throw new RangeError("Invalid time value");const o=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:i});let y,d;i>0?(y=C(a),d=C(e)):(y=C(e),d=C(a));const h=ue(d,y),x=(z(d)-z(y))/1e3,g=Math.round((h-x)/60);let P;if(g<2)return t!=null&&t.includeSeconds?h<5?r.formatDistance("lessThanXSeconds",5,o):h<10?r.formatDistance("lessThanXSeconds",10,o):h<20?r.formatDistance("lessThanXSeconds",20,o):h<40?r.formatDistance("halfAMinute",0,o):h<60?r.formatDistance("lessThanXMinutes",1,o):r.formatDistance("xMinutes",1,o):g===0?r.formatDistance("lessThanXMinutes",1,o):r.formatDistance("xMinutes",g,o);if(g<45)return r.formatDistance("xMinutes",g,o);if(g<90)return r.formatDistance("aboutXHours",1,o);if(g<A){const v=Math.round(g/60);return r.formatDistance("aboutXHours",v,o)}else{if(g<c)return r.formatDistance("xDays",1,o);if(g<S){const v=Math.round(g/A);return r.formatDistance("xDays",v,o)}else if(g<S*2)return P=Math.round(g/S),r.formatDistance("aboutXMonths",P,o)}if(P=le(d,y),P<12){const v=Math.round(g/S);return r.formatDistance("xMonths",v,o)}else{const v=P%12,k=Math.trunc(P/12);return v<3?r.formatDistance("aboutXYears",k,o):v<9?r.formatDistance("overXYears",k,o):r.formatDistance("almostXYears",k+1,o)}}function Ie(e,a){return Ye(e,ne(e),a)}const Le={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mÃªs",other:"cerca de {{count}} meses"},xMonths:{one:"1 mÃªs",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},Be=(e,a,t)=>{let s;const r=Le[e];return typeof r=="string"?s=r:a===1?s=r.one:s=r.other.replace("{{count}}",String(a)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"em "+s:"hÃ¡ "+s:s},Qe={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},Je={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Ue={full:"{{date}} 'Ã s' {{time}}",long:"{{date}} 'Ã s' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ge={date:N({formats:Qe,defaultWidth:"full"}),time:N({formats:Je,defaultWidth:"full"}),dateTime:N({formats:Ue,defaultWidth:"full"})},Ke={lastWeek:e=>{const a=e.getDay();return"'"+(a===0||a===6?"Ãºltimo":"Ãºltima")+"' eeee 'Ã s' p"},yesterday:"'ontem Ã s' p",today:"'hoje Ã s' p",tomorrow:"'amanhÃ£ Ã s' p",nextWeek:"eeee 'Ã s' p",other:"P"},Ze=(e,a,t,s)=>{const r=Ke[e];return typeof r=="function"?r(a):r},et={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},tt={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1Âº trimestre","2Âº trimestre","3Âº trimestre","4Âº trimestre"]},at={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","marÃ§o","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},nt={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terÃ§a","quarta","quinta","sexta","sÃ¡bado"],wide:["domingo","segunda-feira","terÃ§a-feira","quarta-feira","quinta-feira","sexta-feira","sÃ¡bado"]},rt={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhÃ£",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhÃ£",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhÃ£",afternoon:"tarde",evening:"tarde",night:"noite"}},st={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhÃ£",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhÃ£",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhÃ£",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},ot=(e,a)=>{const t=Number(e);return(a==null?void 0:a.unit)==="week"?t+"Âª":t+"Âº"},it={ordinalNumber:ot,era:b({values:et,defaultWidth:"wide"}),quarter:b({values:tt,defaultWidth:"wide",argumentCallback:e=>e-1}),month:b({values:at,defaultWidth:"wide"}),day:b({values:nt,defaultWidth:"wide"}),dayPeriod:b({values:rt,defaultWidth:"wide",formattingValues:st,defaultFormattingWidth:"wide"})},dt=/^(\d+)[ÂºÂªo]?/i,ct=/\d+/i,lt={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},ut={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},mt={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](Âº)? trimestre/i},ht={any:[/1/i,/2/i,/3/i,/4/i]},ft={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|marÃ§o|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},Ct={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},gt={narrow:/^(dom|[23456]Âª?|s[aÃ¡]b)/i,short:/^(dom|[23456]Âª?|s[aÃ¡]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aÃ¡]b)/i,wide:/^(domingo|(segunda|ter[cÃ§]a|quarta|quinta|sexta)([- ]feira)?|s[aÃ¡]bado)/i},Mt={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aÃ¡]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aÃ¡]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aÃ¡]b/i]},yt={narrow:/^(a|p|mn|md|(da) (manhÃ£|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhÃ£|tarde|noite))/i},bt={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhÃ£/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},wt={ordinalNumber:$({matchPattern:dt,parsePattern:ct,valueCallback:e=>parseInt(e,10)}),era:w({matchPatterns:lt,defaultMatchWidth:"wide",parsePatterns:ut,defaultParseWidth:"any"}),quarter:w({matchPatterns:mt,defaultMatchWidth:"wide",parsePatterns:ht,defaultParseWidth:"any",valueCallback:e=>e+1}),month:w({matchPatterns:ft,defaultMatchWidth:"wide",parsePatterns:Ct,defaultParseWidth:"any"}),day:w({matchPatterns:gt,defaultMatchWidth:"wide",parsePatterns:Mt,defaultParseWidth:"any"}),dayPeriod:w({matchPatterns:yt,defaultMatchWidth:"any",parsePatterns:bt,defaultParseWidth:"any"})},xt={code:"pt-BR",formatDistance:Be,formatLong:Ge,formatRelative:Ze,localize:it,match:wt,options:{weekStartsOn:0,firstWeekContainsDate:1}},vt=({title:e,time:a,active:t,messageCount:s,lastMessage:r,onSelect:c,onArchive:i})=>n.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-all hover:bg-gray-100 ${t?"bg-blue-50 border-l-4 border-blue-500":"bg-white"}`,onClick:c,children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(F,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),n.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e})]}),r&&n.jsx("p",{className:"text-xs text-gray-500 truncate mb-1",children:r.length>40?r.substring(0,40)+"...":r}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-xs text-gray-400",children:a}),s>0&&n.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full",children:[s," msg",s!==1?"s":""]})]})]}),n.jsxs(I,{children:[n.jsx(L,{asChild:!0,children:n.jsx(_,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 ml-2",children:n.jsx(J,{className:"w-3 h-3"})})}),n.jsx(B,{align:"end",children:n.jsxs(Q,{onClick:i,children:[n.jsx(U,{className:"w-4 h-4 mr-2"}),"Arquivar"]})})]})]})}),pt=()=>{const{conversations:e,currentConversation:a,loading:t,error:s,createConversation:r,selectConversation:c,archiveConversation:i}=Z(),o=async()=>{await r("Nova conversa")},y=d=>{try{return Ie(new Date(d),{addSuffix:!0,locale:xt})}catch{return"hÃ¡ pouco tempo"}};return t?n.jsx("aside",{className:"w-full h-full p-4 overflow-y-auto bg-gray-50 border-l border-gray-200",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded mb-4"}),Array.from({length:5}).map((d,h)=>n.jsx("div",{className:"mb-3",children:n.jsx("div",{className:"h-16 bg-gray-200 rounded"})},h))]})}):n.jsxs("aside",{className:"w-full h-full p-4 overflow-y-auto bg-gray-50 border-l border-gray-200",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Conversas"}),n.jsx(_,{onClick:o,size:"sm",variant:"outline",className:"h-8 w-8 p-0",children:n.jsx(q,{className:"w-4 h-4"})})]}),s&&n.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded mb-3",children:s})]}),n.jsx("div",{className:"space-y-2",children:e.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(F,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Nenhuma conversa ainda"}),n.jsxs(_,{onClick:o,size:"sm",children:[n.jsx(q,{className:"w-4 h-4 mr-2"}),"ComeÃ§ar nova conversa"]})]}):e.map(d=>n.jsx(vt,{id:d.id,title:d.title,time:y(d.updated_at),messageCount:d.message_count||0,lastMessage:d.last_message||"",active:(a==null?void 0:a.id)===d.id,onSelect:()=>c(d),onArchive:()=>i(d.id)},d.id))})]})},Ht=()=>{const[e,a]=j.useState(!0);return n.jsx("div",{className:"flex w-full h-full bg-white",children:n.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[n.jsx("div",{className:"flex-1 overflow-y-auto",children:n.jsx(K,{})}),e&&n.jsx("div",{className:"hidden w-80 md:block",children:n.jsx(pt,{})})]})})};export{Ht as default};
