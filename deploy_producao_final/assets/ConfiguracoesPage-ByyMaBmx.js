import{j as e}from"./supabase-vendor-vwXl956e.js";import{r as l,R as $}from"./react-vendor-DZvRB87w.js";import{w as B,C as j,a as v,b as w,d as N,y as J,K as q,z as G,e as y,c as X,i as k,t as o}from"./index-DpL_m2zY.js";import{I as n}from"./input-DGm6H34X.js";import{L as i}from"./label-Cc3Gjtp1.js";import{L as c}from"./loader-circle-DRQIsUld.js";import{C as H}from"./camera-CfU6MDVz.js";import{P as F,C as O,K as E}from"./pen-line-Bj5MLwua.js";import"./ui-vendor-Dea2Gxwc.js";const te=()=>{const[r,R]=l.useState(null),[s,m]=l.useState({nome_completo:"",email:"",telefone:"",avatar_url:null}),[x,b]=l.useState(""),[C,P]=l.useState(""),[L,S]=l.useState(!0),[_,U]=l.useState(!1),[A,z]=l.useState(!1),[d,I]=l.useState(!1),f=$.useRef(null);l.useEffect(()=>{(async()=>{var u,p;S(!0);const t={id:"user-123",email:"usuario@exemplo.com",user_metadata:{full_name:"João Silva Santos",avatar_url:null}},h={nome_completo:((u=t.user_metadata)==null?void 0:u.full_name)||"João Silva Santos",email:t.email||"usuario@exemplo.com",telefone:"(11) 99999-9999",avatar_url:((p=t.user_metadata)==null?void 0:p.avatar_url)||null};R(t),m(h),S(!1)})()},[]);const T=async a=>{if(a.preventDefault(),!!r){U(!0);try{await new Promise(t=>setTimeout(t,1e3)),o.success("Perfil atualizado com sucesso!"),console.log("Perfil atualizado:",{nome_completo:s.nome_completo,telefone:s.telefone})}catch{o.error("Erro ao atualizar perfil")}U(!1)}},D=async a=>{if(a.preventDefault(),x!==C){o.error("As senhas não coincidem!");return}if(x.length<6){o.error("A nova senha deve ter pelo menos 6 caracteres.");return}z(!0);try{await new Promise(t=>setTimeout(t,1e3)),o.success("Senha atualizada com sucesso!"),b(""),P(""),console.log("Senha atualizada")}catch{o.error("Erro ao atualizar senha")}z(!1)},K=async a=>{var h;if(!a.target.files||a.target.files.length===0||!r)return;const t=a.target.files[0];I(!0);try{await new Promise(g=>setTimeout(g,2e3));const p=`${`https://via.placeholder.com/150?text=${encodeURIComponent(((h=s.nome_completo)==null?void 0:h.charAt(0))||"U")}`}&t=${new Date().getTime()}`;m(g=>({...g,avatar_url:p})),o.success("Avatar atualizado com sucesso!"),console.log("Avatar atualizado:",t.name)}catch{o.error("Erro ao atualizar avatar")}I(!1)};return L?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white p-4 md:p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto flex justify-center items-center min-h-[60vh]",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(c,{className:"h-12 w-12 text-blue-600 animate-spin"}),e.jsx("p",{className:"ml-4 text-xl text-gray-500 mt-4",children:"Carregando dados..."})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("header",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 flex items-center",children:[e.jsx(B,{className:"mr-3 h-8 w-8 text-blue-600"}),"Configurações da Conta"]}),e.jsx("p",{className:"text-gray-600 mt-1 ml-11",children:"Gerencie suas informações pessoais e de segurança."})]}),e.jsxs("div",{className:"grid gap-8 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-1 space-y-6",children:e.jsxs(j,{className:"shadow-lg",children:[e.jsx(v,{children:e.jsx(w,{children:"Foto de Perfil"})}),e.jsxs(N,{className:"flex flex-col items-center space-y-4",children:[e.jsxs(J,{className:"h-32 w-32 cursor-pointer relative group",onClick:()=>{var a;return(a=f.current)==null?void 0:a.click()},children:[e.jsx(q,{src:s.avatar_url||void 0,alt:s.nome_completo||(r==null?void 0:r.email)||"User"}),e.jsx(G,{className:"text-3xl tracking-wider",children:s.nome_completo?s.nome_completo.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2):r!=null&&r.email?r.email.charAt(0).toUpperCase():"U"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 flex items-center justify-center rounded-full transition-opacity duration-200",children:d?e.jsx(c,{className:"h-8 w-8 text-white animate-spin"}):e.jsx(H,{className:"h-8 w-8 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200"})})]}),e.jsx("input",{type:"file",ref:f,onChange:K,accept:"image/png, image/jpeg, image/gif",className:"hidden",disabled:d}),e.jsxs(y,{variant:"outline",onClick:()=>{var a;return(a=f.current)==null?void 0:a.click()},disabled:d,className:"w-full",children:[d?e.jsx(c,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(F,{className:"mr-2 h-4 w-4"}),"Alterar Foto"]})]})]})}),e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs(j,{className:"shadow-lg",children:[e.jsxs(v,{children:[e.jsxs(w,{className:"flex items-center",children:[e.jsx(O,{className:"mr-2 h-6 w-6 text-blue-600"}),"Informações Pessoais"]}),e.jsx(X,{children:"Atualize seu nome, e-mail e telefone."})]}),e.jsxs("form",{onSubmit:T,children:[e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"nome_completo",children:"Nome Completo"}),e.jsx(n,{id:"nome_completo",value:s.nome_completo||"",onChange:a=>m({...s,nome_completo:a.target.value}),placeholder:"Seu nome completo"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"email",children:"E-mail"}),e.jsx(n,{id:"email",type:"email",value:s.email||"",readOnly:!0,disabled:!0,className:"cursor-not-allowed bg-gray-100"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Para alterar seu e-mail, entre em contato com o suporte."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"telefone",children:"Telefone"}),e.jsx(n,{id:"telefone",type:"tel",value:s.telefone||"",onChange:a=>m({...s,telefone:a.target.value}),placeholder:"(XX) XXXXX-XXXX"})]})]}),e.jsx(k,{className:"border-t pt-6",children:e.jsxs(y,{type:"submit",disabled:_,className:"bg-arca-main hover:bg-arca-dark",children:[_?e.jsx(c,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(F,{className:"mr-2 h-4 w-4"}),"Salvar Informações"]})})]})]}),e.jsxs(j,{className:"shadow-lg",children:[e.jsxs(v,{children:[e.jsxs(w,{className:"flex items-center",children:[e.jsx(E,{className:"mr-2 h-6 w-6 text-blue-600"}),"Alterar Senha"]}),e.jsx(X,{children:"Escolha uma senha forte e que você não use em outro lugar."})]}),e.jsxs("form",{onSubmit:D,children:[e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"newPassword",children:"Nova Senha"}),e.jsx(n,{id:"newPassword",type:"password",value:x,onChange:a=>b(a.target.value),placeholder:"Pelo menos 6 caracteres"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"confirmNewPassword",children:"Confirmar Nova Senha"}),e.jsx(n,{id:"confirmNewPassword",type:"password",value:C,onChange:a=>P(a.target.value),placeholder:"Repita a nova senha"})]})]}),e.jsx(k,{className:"border-t pt-6",children:e.jsxs(y,{type:"submit",disabled:A,className:"bg-arca-main hover:bg-arca-dark",children:[A?e.jsx(c,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(E,{className:"mr-2 h-4 w-4"}),"Atualizar Senha"]})})]})]})]})]})]})})};export{te as default};
