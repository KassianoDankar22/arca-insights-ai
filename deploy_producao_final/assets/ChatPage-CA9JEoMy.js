import{j as n}from"./supabase-vendor-vwXl956e.js";import{R as H,r as x}from"./react-vendor-DZvRB87w.js";import{j as V,s as b,e as E,v as F}from"./index-DpL_m2zY.js";import{m as O}from"./proxy-CqlErGxY.js";import{S as Y}from"./send-CGST6Hao.js";import{C as L}from"./chevron-down-ClZFkY53.js";import{D as B,a as Q,b as J,c as G}from"./dropdown-menu-BUVgTWNq.js";import{P as A}from"./plus-Dzx_oor-.js";import{E as K}from"./ellipsis-vertical-DOhm6Go9.js";import{A as Z}from"./archive-Bi8dia-l.js";import"./ui-vendor-Dea2Gxwc.js";import"./chevron-right-D22Zmd9c.js";import"./check-D6J_I4-5.js";import"./circle-Dbg-d9YW.js";const U=({title:e,onClick:a})=>n.jsx("button",{onClick:a,className:"flex items-center w-full p-3 text-left transition-all border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-gray-300 hover:shadow-sm",children:n.jsx("span",{className:"text-sm text-gray-700",children:e})}),X=H.memo(({className:e})=>{const a=["M-380 -189C-380 -189 -312 216 152 343C616 470 684 875 684 875","M-373 -197C-373 -197 -305 208 159 335C623 462 691 867 691 867","M-366 -205C-366 -205 -298 200 166 327C630 454 698 859 698 859","M-359 -213C-359 -213 -291 192 173 319C637 446 705 851 705 851","M-352 -221C-352 -221 -284 184 180 311C644 438 712 843 712 843","M-345 -229C-345 -229 -277 176 187 303C651 430 719 835 719 835","M-338 -237C-338 -237 -270 168 194 295C658 422 726 827 726 827","M-331 -245C-331 -245 -263 160 201 287C665 414 733 819 733 819","M-324 -253C-324 -253 -256 152 208 279C672 406 740 811 740 811","M-317 -261C-317 -261 -249 144 215 271C679 398 747 803 747 803","M-310 -269C-310 -269 -242 136 222 263C686 390 754 795 754 795","M-303 -277C-303 -277 -235 128 229 255C693 382 761 787 761 787","M-296 -285C-296 -285 -228 120 236 247C700 374 768 779 768 779","M-289 -293C-289 -293 -221 112 243 239C707 366 775 771 775 771","M-282 -301C-282 -301 -214 104 250 231C714 358 782 763 782 763","M-275 -309C-275 -309 -207 96 257 223C721 350 789 755 789 755","M-268 -317C-268 -317 -200 88 264 215C728 342 796 747 796 747","M-261 -325C-261 -325 -193 80 271 207C735 334 803 739 803 739","M-254 -333C-254 -333 -186 72 278 199C742 326 810 731 810 731","M-247 -341C-247 -341 -179 64 285 191C749 318 817 723 817 723","M-240 -349C-240 -349 -172 56 292 183C756 310 824 715 824 715","M-233 -357C-233 -357 -165 48 299 175C763 302 831 707 831 707","M-226 -365C-226 -365 -158 40 306 167C770 294 838 699 838 699","M-219 -373C-219 -373 -151 32 313 159C777 286 845 691 845 691","M-212 -381C-212 -381 -144 24 320 151C784 278 852 683 852 683","M-205 -389C-205 -389 -137 16 327 143C791 270 859 675 859 675","M-198 -397C-198 -397 -130 8 334 135C798 262 866 667 866 667","M-191 -405C-191 -405 -123 0 341 127C805 254 873 659 873 659","M-184 -413C-184 -413 -116 -8 348 119C812 246 880 651 880 651","M-177 -421C-177 -421 -109 -16 355 111C819 238 887 643 887 643","M-170 -429C-170 -429 -102 -24 362 103C826 230 894 635 894 635","M-163 -437C-163 -437 -95 -32 369 95C833 222 901 627 901 627","M-156 -445C-156 -445 -88 -40 376 87C840 214 908 619 908 619","M-149 -453C-149 -453 -81 -48 383 79C847 206 915 611 915 611","M-142 -461C-142 -461 -74 -56 390 71C854 198 922 603 922 603","M-135 -469C-135 -469 -67 -64 397 63C861 190 929 595 929 595","M-128 -477C-128 -477 -60 -72 404 55C868 182 936 587 936 587","M-121 -485C-121 -485 -53 -80 411 47C875 174 943 579 943 579","M-114 -493C-114 -493 -46 -88 418 39C882 166 950 571 950 571","M-107 -501C-107 -501 -39 -96 425 31C889 158 957 563 957 563","M-100 -509C-100 -509 -32 -104 432 23C896 150 964 555 964 555","M-93 -517C-93 -517 -25 -112 439 15C903 142 971 547 971 547","M-86 -525C-86 -525 -18 -120 446 7C910 134 978 539 978 539","M-79 -533C-79 -533 -11 -128 453 -1C917 126 985 531 985 531","M-72 -541C-72 -541 -4 -136 460 -9C924 118 992 523 992 523","M-65 -549C-65 -549 3 -144 467 -17C931 110 999 515 999 515","M-58 -557C-58 -557 10 -152 474 -25C938 102 1006 507 1006 507","M-51 -565C-51 -565 17 -160 481 -33C945 94 1013 499 1013 499","M-44 -573C-44 -573 24 -168 488 -41C952 86 1020 491 1020 491","M-37 -581C-37 -581 31 -176 495 -49C959 78 1027 483 1027 483"];return n.jsx("div",{className:V("absolute h-full w-full inset-0 [mask-size:40px] [mask-repeat:no-repeat] flex items-center justify-center",e),children:n.jsxs("svg",{className:"z-0 h-full w-full pointer-events-none absolute",width:"100%",height:"100%",viewBox:"0 0 696 316",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("path",{d:"M-380 -189C-380 -189 -312 216 152 343C616 470 684 875 684 875M-373 -197C-373 -197 -305 208 159 335C623 462 691 867 691 867M-366 -205C-366 -205 -298 200 166 327C630 454 698 859 698 859M-359 -213C-359 -213 -291 192 173 319C637 446 705 851 705 851M-352 -221C-352 -221 -284 184 180 311C644 438 712 843 712 843M-345 -229C-345 -229 -277 176 187 303C651 430 719 835 719 835M-338 -237C-338 -237 -270 168 194 295C658 422 726 827 726 827M-331 -245C-331 -245 -263 160 201 287C665 414 733 819 733 819M-324 -253C-324 -253 -256 152 208 279C672 406 740 811 740 811M-317 -261C-317 -261 -249 144 215 271C679 398 747 803 747 803M-310 -269C-310 -269 -242 136 222 263C686 390 754 795 754 795M-303 -277C-303 -277 -235 128 229 255C693 382 761 787 761 787M-296 -285C-296 -285 -228 120 236 247C700 374 768 779 768 779M-289 -293C-289 -293 -221 112 243 239C707 366 775 771 775 771M-282 -301C-282 -301 -214 104 250 231C714 358 782 763 782 763M-275 -309C-275 -309 -207 96 257 223C721 350 789 755 789 755M-268 -317C-268 -317 -200 88 264 215C728 342 796 747 796 747M-261 -325C-261 -325 -193 80 271 207C735 334 803 739 803 739M-254 -333C-254 -333 -186 72 278 199C742 326 810 731 810 731M-247 -341C-247 -341 -179 64 285 191C749 318 817 723 817 723M-240 -349C-240 -349 -172 56 292 183C756 310 824 715 824 715M-233 -357C-233 -357 -165 48 299 175C763 302 831 707 831 707M-226 -365C-226 -365 -158 40 306 167C770 294 838 699 838 699M-219 -373C-219 -373 -151 32 313 159C777 286 845 691 845 691M-212 -381C-212 -381 -144 24 320 151C784 278 852 683 852 683M-205 -389C-205 -389 -137 16 327 143C791 270 859 675 859 675M-198 -397C-198 -397 -130 8 334 135C798 262 866 667 866 667M-191 -405C-191 -405 -123 0 341 127C805 254 873 659 873 659M-184 -413C-184 -413 -116 -8 348 119C812 246 880 651 880 651M-177 -421C-177 -421 -109 -16 355 111C819 238 887 643 887 643M-170 -429C-170 -429 -102 -24 362 103C826 230 894 635 894 635M-163 -437C-163 -437 -95 -32 369 95C833 222 901 627 901 627M-156 -445C-156 -445 -88 -40 376 87C840 214 908 619 908 619M-149 -453C-149 -453 -81 -48 383 79C847 206 915 611 915 611M-142 -461C-142 -461 -74 -56 390 71C854 198 922 603 922 603M-135 -469C-135 -469 -67 -64 397 63C861 190 929 595 929 595M-128 -477C-128 -477 -60 -72 404 55C868 182 936 587 936 587M-121 -485C-121 -485 -53 -80 411 47C875 174 943 579 943 579M-114 -493C-114 -493 -46 -88 418 39C882 166 950 571 950 571M-107 -501C-107 -501 -39 -96 425 31C889 158 957 563 957 563M-100 -509C-100 -509 -32 -104 432 23C896 150 964 555 964 555M-93 -517C-93 -517 -25 -112 439 15C903 142 971 547 971 547M-86 -525C-86 -525 -18 -120 446 7C910 134 978 539 978 539M-79 -533C-79 -533 -11 -128 453 -1C917 126 985 531 985 531M-72 -541C-72 -541 -4 -136 460 -9C924 118 992 523 992 523M-65 -549C-65 -549 3 -144 467 -17C931 110 999 515 999 515M-58 -557C-58 -557 10 -152 474 -25C938 102 1006 507 1006 507M-51 -565C-51 -565 17 -160 481 -33C945 94 1013 499 1013 499M-44 -573C-44 -573 24 -168 488 -41C952 86 1020 491 1020 491M-37 -581C-37 -581 31 -176 495 -49C959 78 1027 483 1027 483",stroke:"url(#paint0_radial_242_278)",strokeOpacity:"0.05",strokeWidth:"0.5"}),a.map((t,r)=>n.jsx(O.path,{d:t,stroke:`url(#linearGradient-${r})`,strokeOpacity:"0.4",strokeWidth:"0.5"},"path-"+r)),n.jsxs("defs",{children:[a.map((t,r)=>n.jsxs(O.linearGradient,{id:`linearGradient-${r}`,initial:{x1:"0%",x2:"0%",y1:"0%",y2:"0%"},animate:{x1:["0%","100%"],x2:["0%","95%"],y1:["0%","100%"],y2:["0%",`${93+Math.random()*8}%`]},transition:{duration:Math.random()*10+10,ease:"easeInOut",repeat:1/0,delay:Math.random()*10},children:[n.jsx("stop",{stopColor:"#18CCFC",stopOpacity:"0"}),n.jsx("stop",{stopColor:"#18CCFC"}),n.jsx("stop",{offset:"32.5%",stopColor:"#6344F5"}),n.jsx("stop",{offset:"100%",stopColor:"#AE48FF",stopOpacity:"0"})]},`gradient-${r}`)),n.jsxs("radialGradient",{id:"paint0_radial_242_278",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(352 34) rotate(90) scale(555 1560.62)",children:[n.jsx("stop",{offset:"0.0666667",stopColor:"var(--neutral-300)"}),n.jsx("stop",{offset:"0.243243",stopColor:"var(--neutral-300)"}),n.jsx("stop",{offset:"0.43594",stopColor:"white",stopOpacity:"0"})]})]})]})})});X.displayName="BackgroundBeams";const ee=()=>{const[e,a]=x.useState(""),t=()=>{e.trim()&&(console.log("Sending message:",e),a(""))},r=[{title:"Calcular ROI de casa em Orlando",onClick:()=>console.log("ROI Orlando clicked")},{title:"Comparar valorizaÃ§Ã£o entre bairros",onClick:()=>console.log("ValorizaÃ§Ã£o clicked")},{title:"Mostrar tendÃªncias do mercado em Miami",onClick:()=>console.log("TendÃªncias Miami clicked")},{title:"Analisar melhor momento para investir",onClick:()=>console.log("Momento investir clicked")}];return n.jsxs("div",{className:"relative flex flex-col items-center justify-center w-full min-h-screen bg-white",children:[n.jsx(X,{className:"opacity-20"}),n.jsxs("div",{className:"z-10 flex flex-col items-center max-w-2xl px-4 py-10",children:[n.jsx("h1",{className:"mb-3 text-4xl font-bold text-center",children:"Start talking to ðŸ¤– Arca AI Chat"}),n.jsx("p",{className:"max-w-lg mb-8 text-center text-gray-600",children:"Sua assistente imobiliÃ¡ria inteligente! Precisa de uma anÃ¡lise rÃ¡pida, sugestÃµes ou um panorama do mercado? A Arca estÃ¡ aqui para ajudar."}),n.jsxs("div",{className:"w-full mb-4",children:[n.jsxs("div",{className:"relative w-full",children:[n.jsx("textarea",{value:e,onChange:o=>a(o.target.value),placeholder:"Escreva uma pergunta...",className:"w-full p-4 pr-12 text-gray-700 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-arca-blue focus:border-transparent resize-none min-h-[120px]",onKeyDown:o=>{o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),t())}}),n.jsx("button",{onClick:t,disabled:!e.trim(),className:"absolute p-2 text-white rounded-full bottom-3 right-3 bg-arca-blue hover:bg-arca-blue/80 disabled:bg-gray-300 disabled:cursor-not-allowed",children:n.jsx(Y,{size:18})})]}),n.jsx("div",{className:"flex items-center justify-between w-full px-1 mt-2 text-sm text-gray-500",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"Modelo: GPT-4"}),n.jsx(L,{size:16})]})})]}),n.jsxs("div",{className:"w-full mt-4",children:[n.jsx("h3",{className:"mb-3 text-sm font-medium text-gray-500",children:"SugestÃµes"}),n.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:r.map((o,c)=>n.jsx(U,{title:o.title,onClick:o.onClick},c))})]})]})]})};function te(){const[e,a]=x.useState(null),[t,r]=x.useState(null),[o,c]=x.useState(!0);x.useEffect(()=>{b.auth.getSession().then(({data:{session:d}})=>{a(d),d!=null&&d.user?l(d.user):r(null),c(!1)});const{data:{subscription:s}}=b.auth.onAuthStateChange(async(d,g)=>{a(g),g!=null&&g.user?await l(g.user):r(null),c(!1)});return()=>s.unsubscribe()},[]);const l=async s=>{var d,g,_,W,q,m;try{const{data:h,error:f}=await b.from("usuarios").select("*").eq("id",s.id).single();if(f&&f.code!=="PGRST116"&&console.error("Erro ao carregar perfil:",f),h)r({id:s.id,email:s.email,name:h.nome_completo,avatar_url:h.avatar_url,plan:"free",status:"active"});else{const C={id:s.id,email:s.email||"",nome_completo:((d=s.user_metadata)==null?void 0:d.full_name)||((g=s.user_metadata)==null?void 0:g.name)||"",avatar_url:((_=s.user_metadata)==null?void 0:_.avatar_url)||null,criado_em:new Date().toISOString(),atualizado_em:new Date().toISOString()},{error:y}=await b.from("usuarios").insert([C]);y&&console.error("Erro ao criar perfil:",y),r({id:s.id,email:s.email,name:C.nome_completo,avatar_url:C.avatar_url,plan:"free",status:"active"})}}catch(h){console.error("Erro ao carregar perfil do usuÃ¡rio:",h),r({id:s.id,email:s.email,name:((W=s.user_metadata)==null?void 0:W.full_name)||((q=s.user_metadata)==null?void 0:q.name),avatar_url:(m=s.user_metadata)==null?void 0:m.avatar_url,plan:"free",status:"active"})}};return{user:t,session:e,loading:o,signIn:async(s,d)=>{const{data:g,error:_}=await b.auth.signInWithPassword({email:s,password:d});return{data:g,error:_}},signUp:async(s,d,g)=>{const{data:_,error:W}=await b.auth.signUp({email:s,password:d,options:{data:{full_name:g}}});return{data:_,error:W}},signInWithGoogle:async()=>{const{data:s,error:d}=await b.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/dashboard`,queryParams:{access_type:"offline",prompt:"consent"}}});return{data:s,error:d}},signOut:async()=>{const{error:s}=await b.auth.signOut();return s||(r(null),a(null)),{error:s}},resetPassword:async s=>{const{data:d,error:g}=await b.auth.resetPasswordForEmail(s,{redirectTo:`${window.location.origin}/reset-password`});return{data:d,error:g}},updateProfile:async s=>{if(!t)return{error:new Error("UsuÃ¡rio nÃ£o autenticado")};try{const{error:d}=await b.from("usuarios").update({nome_completo:s.name,avatar_url:s.avatar_url}).eq("id",t.id);if(d)throw d;return r(g=>g?{...g,...s}:null),{error:null}}catch(d){return console.error("Erro ao atualizar perfil:",d),{error:d}}}}}const ae=()=>{const{user:e}=te(),[a,t]=x.useState([]),[r,o]=x.useState(null),[c,l]=x.useState([]),[i,v]=x.useState(!0),[u,M]=x.useState(null);x.useEffect(()=>{e?j():(t([]),o(null),l([]),v(!1))},[e]);const j=async()=>{if(e)try{v(!0);const{data:m,error:h}=await b.from("chat_conversations").select(`
          *,
          chat_messages(count)
        `).eq("user_id",e.id).eq("is_archived",!1).order("updated_at",{ascending:!1});if(h)throw h;const f=await Promise.all((m||[]).map(async C=>{const{data:y}=await b.from("chat_messages").select("content, created_at").eq("conversation_id",C.id).order("created_at",{ascending:!1}).limit(1).single(),{count:N}=await b.from("chat_messages").select("id",{count:"exact"}).eq("conversation_id",C.id);return{...C,message_count:N||0,last_message:(y==null?void 0:y.content)||""}}));t(f),M(null)}catch(m){console.error("Erro ao carregar conversas:",m),M("Erro ao carregar histÃ³rico de conversas")}finally{v(!1)}},w=async m=>{if(e)try{const{data:h,error:f}=await b.from("chat_messages").select("*").eq("conversation_id",m).order("created_at",{ascending:!0});if(f)throw f;l(h||[]),M(null)}catch(h){console.error("Erro ao carregar mensagens:",h),M("Erro ao carregar mensagens")}};return{conversations:a,currentConversation:r,messages:c,loading:i,error:u,createConversation:async(m,h)=>{if(!e)return null;try{const{data:f,error:C}=await b.from("chat_conversations").insert([{user_id:e.id,title:m,thread_id:h}]).select().single();if(C)throw C;const y={...f,message_count:0,last_message:""};return t(N=>[y,...N]),o(y),l([]),y}catch(f){return console.error("Erro ao criar conversa:",f),M("Erro ao criar nova conversa"),null}},addMessage:async(m,h,f,C)=>{if(!e)return null;try{const{data:y,error:N}=await b.from("chat_messages").insert([{conversation_id:m,role:h,content:f,metadata:C}]).select().single();if(N)throw N;return l(R=>[...R,y]),await b.from("chat_conversations").update({updated_at:new Date().toISOString()}).eq("id",m),await j(),y}catch(y){return console.error("Erro ao adicionar mensagem:",y),M("Erro ao salvar mensagem"),null}},updateConversationTitle:async(m,h)=>{if(e)try{const{error:f}=await b.from("chat_conversations").update({title:h}).eq("id",m);if(f)throw f;t(C=>C.map(y=>y.id===m?{...y,title:h}:y)),(r==null?void 0:r.id)===m&&o(C=>C?{...C,title:h}:null)}catch(f){console.error("Erro ao atualizar tÃ­tulo:",f),M("Erro ao atualizar tÃ­tulo da conversa")}},archiveConversation:async m=>{if(e)try{const{error:h}=await b.from("chat_conversations").update({is_archived:!0}).eq("id",m);if(h)throw h;t(f=>f.filter(C=>C.id!==m)),(r==null?void 0:r.id)===m&&(o(null),l([]))}catch(h){console.error("Erro ao arquivar conversa:",h),M("Erro ao arquivar conversa")}},selectConversation:async m=>{o(m),await w(m.id)},generateTitle:m=>{let f=m.split(" ").slice(0,6).join(" ");if(m.length>50&&(f+="..."),f.length<10){const C=["Nova anÃ¡lise de ROI","Consulta sobre investimento","AnÃ¡lise de propriedade","CÃ¡lculo financeiro","AvaliaÃ§Ã£o imobiliÃ¡ria"];f=C[Math.floor(Math.random()*C.length)]}return f},refresh:j}};function p(e){const a=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&a==="[object Date]"?new e.constructor(+e):typeof e=="number"||a==="[object Number]"||typeof e=="string"||a==="[object String]"?new Date(e):new Date(NaN)}function re(e,a){return e instanceof Date?new e.constructor(a):new Date(a)}const k=43200,z=1440;let ne={};function oe(){return ne}function $(e){const a=p(e),t=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return t.setUTCFullYear(a.getFullYear()),+e-+t}function T(e,a){const t=p(e),r=p(a),o=t.getTime()-r.getTime();return o<0?-1:o>0?1:o}function se(e){return re(e,Date.now())}function ie(e,a){const t=p(e),r=p(a),o=t.getFullYear()-r.getFullYear(),c=t.getMonth()-r.getMonth();return o*12+c}function le(e){return a=>{const r=(e?Math[e]:Math.trunc)(a);return r===0?0:r}}function de(e,a){return+p(e)-+p(a)}function ce(e){const a=p(e);return a.setHours(23,59,59,999),a}function ue(e){const a=p(e),t=a.getMonth();return a.setFullYear(a.getFullYear(),t+1,0),a.setHours(23,59,59,999),a}function me(e){const a=p(e);return+ce(a)==+ue(a)}function he(e,a){const t=p(e),r=p(a),o=T(t,r),c=Math.abs(ie(t,r));let l;if(c<1)l=0;else{t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-o*c);let i=T(t,r)===-o;me(p(e))&&c===1&&T(e,r)===1&&(i=!1),l=o*(c-Number(i))}return l===0?0:l}function fe(e,a,t){const r=de(e,a)/1e3;return le(t==null?void 0:t.roundingMethod)(r)}const ge={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ce=(e,a,t)=>{let r;const o=ge[e];return typeof o=="string"?r=o:a===1?r=o.one:r=o.other.replace("{{count}}",a.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function S(e){return(a={})=>{const t=a.width?String(a.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}const Me={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ye={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},be={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},we={date:S({formats:Me,defaultWidth:"full"}),time:S({formats:ye,defaultWidth:"full"}),dateTime:S({formats:be,defaultWidth:"full"})},pe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ve=(e,a,t,r)=>pe[e];function P(e){return(a,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let o;if(r==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,i=t!=null&&t.width?String(t.width):l;o=e.formattingValues[i]||e.formattingValues[l]}else{const l=e.defaultWidth,i=t!=null&&t.width?String(t.width):e.defaultWidth;o=e.values[i]||e.values[l]}const c=e.argumentCallback?e.argumentCallback(a):a;return o[c]}}const xe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},je={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Pe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},De={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Se=(e,a)=>{const t=Number(e),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},We={ordinalNumber:Se,era:P({values:xe,defaultWidth:"wide"}),quarter:P({values:je,defaultWidth:"wide",argumentCallback:e=>e-1}),month:P({values:Pe,defaultWidth:"wide"}),day:P({values:De,defaultWidth:"wide"}),dayPeriod:P({values:_e,defaultWidth:"wide",formattingValues:Ne,defaultFormattingWidth:"wide"})};function D(e){return(a,t={})=>{const r=t.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],c=a.match(o);if(!c)return null;const l=c[0],i=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],v=Array.isArray(i)?Te(i,j=>j.test(l)):ke(i,j=>j.test(l));let u;u=e.valueCallback?e.valueCallback(v):v,u=t.valueCallback?t.valueCallback(u):u;const M=a.slice(l.length);return{value:u,rest:M}}}function ke(e,a){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&a(e[t]))return t}function Te(e,a){for(let t=0;t<e.length;t++)if(a(e[t]))return t}function I(e){return(a,t={})=>{const r=a.match(e.matchPattern);if(!r)return null;const o=r[0],c=a.match(e.parsePattern);if(!c)return null;let l=e.valueCallback?e.valueCallback(c[0]):c[0];l=t.valueCallback?t.valueCallback(l):l;const i=a.slice(o.length);return{value:l,rest:i}}}const qe=/^(\d+)(th|st|nd|rd)?/i,Ee=/\d+/i,Oe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ae={any:[/^b/i,/^(a|c)/i]},ze={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},$e={any:[/1/i,/2/i,/3/i,/4/i]},Fe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Xe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ie={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Re={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},He={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ve={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ye={ordinalNumber:I({matchPattern:qe,parsePattern:Ee,valueCallback:e=>parseInt(e,10)}),era:D({matchPatterns:Oe,defaultMatchWidth:"wide",parsePatterns:Ae,defaultParseWidth:"any"}),quarter:D({matchPatterns:ze,defaultMatchWidth:"wide",parsePatterns:$e,defaultParseWidth:"any",valueCallback:e=>e+1}),month:D({matchPatterns:Fe,defaultMatchWidth:"wide",parsePatterns:Xe,defaultParseWidth:"any"}),day:D({matchPatterns:Ie,defaultMatchWidth:"wide",parsePatterns:Re,defaultParseWidth:"any"}),dayPeriod:D({matchPatterns:He,defaultMatchWidth:"any",parsePatterns:Ve,defaultParseWidth:"any"})},Le={code:"en-US",formatDistance:Ce,formatLong:we,formatRelative:ve,localize:We,match:Ye,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Be(e,a,t){const r=oe(),o=(t==null?void 0:t.locale)??r.locale??Le,c=2520,l=T(e,a);if(isNaN(l))throw new RangeError("Invalid time value");const i=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:l});let v,u;l>0?(v=p(a),u=p(e)):(v=p(e),u=p(a));const M=fe(u,v),j=($(u)-$(v))/1e3,w=Math.round((M-j)/60);let s;if(w<2)return t!=null&&t.includeSeconds?M<5?o.formatDistance("lessThanXSeconds",5,i):M<10?o.formatDistance("lessThanXSeconds",10,i):M<20?o.formatDistance("lessThanXSeconds",20,i):M<40?o.formatDistance("halfAMinute",0,i):M<60?o.formatDistance("lessThanXMinutes",1,i):o.formatDistance("xMinutes",1,i):w===0?o.formatDistance("lessThanXMinutes",1,i):o.formatDistance("xMinutes",w,i);if(w<45)return o.formatDistance("xMinutes",w,i);if(w<90)return o.formatDistance("aboutXHours",1,i);if(w<z){const d=Math.round(w/60);return o.formatDistance("aboutXHours",d,i)}else{if(w<c)return o.formatDistance("xDays",1,i);if(w<k){const d=Math.round(w/z);return o.formatDistance("xDays",d,i)}else if(w<k*2)return s=Math.round(w/k),o.formatDistance("aboutXMonths",s,i)}if(s=he(u,v),s<12){const d=Math.round(w/k);return o.formatDistance("xMonths",d,i)}else{const d=s%12,g=Math.trunc(s/12);return d<3?o.formatDistance("aboutXYears",g,i):d<9?o.formatDistance("overXYears",g,i):o.formatDistance("almostXYears",g+1,i)}}function Qe(e,a){return Be(e,se(e),a)}const Je={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mÃªs",other:"cerca de {{count}} meses"},xMonths:{one:"1 mÃªs",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},Ge=(e,a,t)=>{let r;const o=Je[e];return typeof o=="string"?r=o:a===1?r=o.one:r=o.other.replace("{{count}}",String(a)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"em "+r:"hÃ¡ "+r:r},Ke={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},Ze={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Ue={full:"{{date}} 'Ã s' {{time}}",long:"{{date}} 'Ã s' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},et={date:S({formats:Ke,defaultWidth:"full"}),time:S({formats:Ze,defaultWidth:"full"}),dateTime:S({formats:Ue,defaultWidth:"full"})},tt={lastWeek:e=>{const a=e.getDay();return"'"+(a===0||a===6?"Ãºltimo":"Ãºltima")+"' eeee 'Ã s' p"},yesterday:"'ontem Ã s' p",today:"'hoje Ã s' p",tomorrow:"'amanhÃ£ Ã s' p",nextWeek:"eeee 'Ã s' p",other:"P"},at=(e,a,t,r)=>{const o=tt[e];return typeof o=="function"?o(a):o},rt={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},nt={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1Âº trimestre","2Âº trimestre","3Âº trimestre","4Âº trimestre"]},ot={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","marÃ§o","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},st={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terÃ§a","quarta","quinta","sexta","sÃ¡bado"],wide:["domingo","segunda-feira","terÃ§a-feira","quarta-feira","quinta-feira","sexta-feira","sÃ¡bado"]},it={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhÃ£",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhÃ£",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhÃ£",afternoon:"tarde",evening:"tarde",night:"noite"}},lt={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhÃ£",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhÃ£",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhÃ£",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},dt=(e,a)=>{const t=Number(e);return(a==null?void 0:a.unit)==="week"?t+"Âª":t+"Âº"},ct={ordinalNumber:dt,era:P({values:rt,defaultWidth:"wide"}),quarter:P({values:nt,defaultWidth:"wide",argumentCallback:e=>e-1}),month:P({values:ot,defaultWidth:"wide"}),day:P({values:st,defaultWidth:"wide"}),dayPeriod:P({values:it,defaultWidth:"wide",formattingValues:lt,defaultFormattingWidth:"wide"})},ut=/^(\d+)[ÂºÂªo]?/i,mt=/\d+/i,ht={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},ft={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},gt={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](Âº)? trimestre/i},Ct={any:[/1/i,/2/i,/3/i,/4/i]},Mt={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|marÃ§o|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},yt={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},bt={narrow:/^(dom|[23456]Âª?|s[aÃ¡]b)/i,short:/^(dom|[23456]Âª?|s[aÃ¡]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aÃ¡]b)/i,wide:/^(domingo|(segunda|ter[cÃ§]a|quarta|quinta|sexta)([- ]feira)?|s[aÃ¡]bado)/i},wt={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aÃ¡]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aÃ¡]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aÃ¡]b/i]},pt={narrow:/^(a|p|mn|md|(da) (manhÃ£|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhÃ£|tarde|noite))/i},vt={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhÃ£/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},xt={ordinalNumber:I({matchPattern:ut,parsePattern:mt,valueCallback:e=>parseInt(e,10)}),era:D({matchPatterns:ht,defaultMatchWidth:"wide",parsePatterns:ft,defaultParseWidth:"any"}),quarter:D({matchPatterns:gt,defaultMatchWidth:"wide",parsePatterns:Ct,defaultParseWidth:"any",valueCallback:e=>e+1}),month:D({matchPatterns:Mt,defaultMatchWidth:"wide",parsePatterns:yt,defaultParseWidth:"any"}),day:D({matchPatterns:bt,defaultMatchWidth:"wide",parsePatterns:wt,defaultParseWidth:"any"}),dayPeriod:D({matchPatterns:pt,defaultMatchWidth:"any",parsePatterns:vt,defaultParseWidth:"any"})},jt={code:"pt-BR",formatDistance:Ge,formatLong:et,formatRelative:at,localize:ct,match:xt,options:{weekStartsOn:0,firstWeekContainsDate:1}},Pt=({title:e,time:a,active:t,messageCount:r,lastMessage:o,onSelect:c,onArchive:l})=>n.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-all hover:bg-gray-100 ${t?"bg-blue-50 border-l-4 border-blue-500":"bg-white"}`,onClick:c,children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(F,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),n.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e})]}),o&&n.jsx("p",{className:"text-xs text-gray-500 truncate mb-1",children:o.length>40?o.substring(0,40)+"...":o}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-xs text-gray-400",children:a}),r>0&&n.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full",children:[r," msg",r!==1?"s":""]})]})]}),n.jsxs(B,{children:[n.jsx(Q,{asChild:!0,children:n.jsx(E,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 ml-2",children:n.jsx(K,{className:"w-3 h-3"})})}),n.jsx(J,{align:"end",children:n.jsxs(G,{onClick:l,children:[n.jsx(Z,{className:"w-4 h-4 mr-2"}),"Arquivar"]})})]})]})}),Dt=()=>{const{conversations:e,currentConversation:a,loading:t,error:r,createConversation:o,selectConversation:c,archiveConversation:l}=ae(),i=async()=>{await o("Nova conversa")},v=u=>{try{return Qe(new Date(u),{addSuffix:!0,locale:jt})}catch{return"hÃ¡ pouco tempo"}};return t?n.jsx("aside",{className:"w-full h-full p-4 overflow-y-auto bg-gray-50 border-l border-gray-200",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded mb-4"}),Array.from({length:5}).map((u,M)=>n.jsx("div",{className:"mb-3",children:n.jsx("div",{className:"h-16 bg-gray-200 rounded"})},M))]})}):n.jsxs("aside",{className:"w-full h-full p-4 overflow-y-auto bg-gray-50 border-l border-gray-200",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Conversas"}),n.jsx(E,{onClick:i,size:"sm",variant:"outline",className:"h-8 w-8 p-0",children:n.jsx(A,{className:"w-4 h-4"})})]}),r&&n.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded mb-3",children:r})]}),n.jsx("div",{className:"space-y-2",children:e.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(F,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Nenhuma conversa ainda"}),n.jsxs(E,{onClick:i,size:"sm",children:[n.jsx(A,{className:"w-4 h-4 mr-2"}),"ComeÃ§ar nova conversa"]})]}):e.map(u=>n.jsx(Pt,{id:u.id,title:u.title,time:v(u.updated_at),messageCount:u.message_count||0,lastMessage:u.last_message||"",active:(a==null?void 0:a.id)===u.id,onSelect:()=>c(u),onArchive:()=>l(u.id)},u.id))})]})},It=()=>{const[e,a]=x.useState(!0);return n.jsx("div",{className:"flex w-full h-full bg-white",children:n.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[n.jsx("div",{className:"flex-1 overflow-y-auto",children:n.jsx(ee,{})}),e&&n.jsx("div",{className:"hidden w-80 md:block",children:n.jsx(Dt,{})})]})})};export{It as default};
